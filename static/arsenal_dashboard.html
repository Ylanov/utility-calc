<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–°–¢–†–û–ë.–ê—Ä—Å–µ–Ω–∞–ª</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body{background-color:#e5e7eb;font-family:'Segoe UI',sans-serif;height:100vh;display:flex;flex-direction:column;overflow:hidden}
.top-bar{background:#1e3a8a;color:white;padding:0 15px;height:50px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 2px 5px rgba(0,0,0,0.2);flex-shrink:0}
.menu-bar{background:#f3f4f6;border-bottom:1px solid #d1d5db;padding:5px 10px;display:flex;gap:15px;font-size:14px;flex-shrink:0}
.menu-item{cursor:pointer;padding:5px 10px;border-radius:4px;display:flex;align-items:center}
.menu-item:hover{background:#e5e7eb}
.main-layout{display:flex;flex:1;overflow:hidden}
.sidebar{width:300px;background:white;border-right:1px solid #d1d5db;display:flex;flex-direction:column;flex-shrink:0}
.sidebar-header{padding:10px;background:#f9fafb;border-bottom:1px solid #e5e7eb;font-weight:bold;font-size:13px;color:#374151}
.tree-container{flex:1;overflow-y:auto;padding:10px;font-size:14px}
.tree-node{padding:4px 8px;cursor:pointer;display:flex;align-items:center;gap:8px;border-radius:4px;margin-bottom:2px}
.tree-node:hover{background-color:#eff6ff}
.workspace{flex:1;display:flex;flex-direction:column;background:white;padding:15px;overflow:hidden}
.ws-toolbar{display:flex;gap:10px;margin-bottom:15px;align-items:center;flex-shrink:0}
.data-table-container{border:1px solid #d1d5db;border-radius:4px;overflow:auto;flex:1;background:white}
table{width:100%;border-collapse:collapse;font-size:13px}
th{background:#f3f4f6;border-bottom:2px solid #e5e7eb;padding:8px;text-align:left;font-weight:600;color:#4b5563;position:sticky;top:0;z-index:10}
td{border-bottom:1px solid #e5e7eb;padding:6px 8px;color:#1f2937;vertical-align:middle}
tr:hover{background-color:#f9fafb}
.tool-btn{display:flex;align-items:center;gap:6px;padding:6px 12px;background:#f3f4f6;border:1px solid #d1d5db;border-radius:4px;font-size:13px;cursor:pointer;transition:all 0.2s}
.tool-btn:hover{background:#e5e7eb;border-color:#9ca3af}
.tool-btn.primary{background:#dbeafe;border-color:#93c5fd;color:#1e40af}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:1000}
.modal-content{background:white;width:700px;max-width:95%;border-radius:6px;box-shadow:0 10px 25px rgba(0,0,0,0.2);overflow:hidden;display:flex;flex-direction:column;max-height:90vh}
.modal-header{background:#1e3a8a;color:white;padding:10px 15px;font-weight:bold;display:flex;justify-content:space-between;flex-shrink:0}
.modal-body{padding:20px;overflow-y:auto}
.modal-footer{padding:15px;border-top:1px solid #e5e7eb;background:#f9fafb;display:flex;justify-content:flex-end;gap:10px;flex-shrink:0}

/* –°—Ç–∏–ª–∏ –¥–ª—è —à–∏—Ä–æ–∫–∏—Ö —Ç–∞–±–ª–∏—Ü */
#balanceModal .modal-content { width: 900px; max-width: 95%; }
#newDocModal .modal-content { width: 850px; max-width: 95%; }
</style>
</head>
<body>
<!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
<div class="top-bar">
    <div class="flex items-center gap-3">
        <i class="fa-solid fa-shield-halved text-xl"></i>
        <span class="font-bold tracking-wide">–°–¢–†–û–ë.–ê—Ä—Å–µ–Ω–∞–ª</span>
    </div>
    <div class="flex items-center gap-4 text-sm">
        <span><i class="fa-solid fa-user mr-2"></i>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
        <button id="logoutBtn" class="hover:text-red-300 transition" title="–í—ã—Ö–æ–¥"><i class="fa-solid fa-sign-out-alt"></i></button>
    </div>
</div>
<!-- –ú–µ–Ω—é -->
<div class="menu-bar">
    <div class="menu-item" id="menuDocs"><i class="fa-solid fa-folder-open mr-2 text-yellow-600"></i>–î–æ–∫—É–º–µ–Ω—Ç—ã</div>
    <div class="menu-item" id="menuObjects"><i class="fa-solid fa-sitemap mr-2 text-blue-600"></i>–û–±—ä–µ–∫—Ç—ã</div>
    <div class="menu-item" id="menuNomenclature"><i class="fa-solid fa-list mr-2 text-green-600"></i>–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞</div>
    <div class="menu-item" id="menuReports"><i class="fa-solid fa-chart-pie mr-2 text-purple-600"></i>–û—Ç—á–µ—Ç—ã</div>
    <div class="menu-item" id="menuUsers"><i class="fa-solid fa-users-gear mr-2 text-teal-600"></i>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</div>
</div>
<div class="main-layout">
    <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ -->
    <div class="sidebar">
        <div class="sidebar-header flex justify-between items-center">
            <span><i class="fa-solid fa-network-wired mr-2"></i>–°—Ç—Ä—É–∫—Ç—É—Ä–∞</span>
            <div>
                <!-- üî• –ù–û–í–ê–Ø –ö–ù–û–ü–ö–ê –ò–ú–ü–û–†–¢–ê –ò–ó EXCEL üî• -->
                <button id="btnImportExcel" class="text-green-600 hover:text-green-800 text-lg mr-3" title="–ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç –∏–∑ Excel">
                    <i class="fa-solid fa-file-excel"></i>
                </button>
                <button id="btnAddObject" class="text-blue-600 hover:text-blue-800 font-bold text-lg" title="–î–æ–±–∞–≤–∏—Ç—å">+</button>
            </div>
            <!-- –°–∫—Ä—ã—Ç—ã–π –∏–Ω–ø—É—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ -->
            <input type="file" id="excelUploadInput" accept=".xlsx, .xls" style="display: none;">
        </div>
        <div class="tree-container" id="orgTree">
            <div class="p-4 text-gray-500 text-center text-sm">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã...</div>
        </div>
    </div>
    <!-- –†–∞–±–æ—á–∞—è –æ–±–ª–∞—Å—Ç—å -->
    <div class="workspace">
        <div class="ws-toolbar">
            <button id="btnOpenCreateModal" class="tool-btn primary"><i class="fa-solid fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</button>
            <div class="h-6 w-px bg-gray-300 mx-2"></div>
            <button id="btnRefreshDocs" class="tool-btn"><i class="fa-solid fa-rotate-right"></i> –û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
        <div class="data-table-container">
            <table>
                <thead>
                    <tr>
                        <th style="width:40px">–¢–∏–ø</th>
                        <th>–î–∞—Ç–∞</th>
                        <th>–ù–æ–º–µ—Ä</th>
                        <th>–û–ø–µ—Ä–∞—Ü–∏—è</th>
                        <th>–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å</th>
                        <th>–ü–æ–ª—É—á–∞—Ç–µ–ª—å</th>
                        <th style="width:80px" class="text-center">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="docsTableBody"></tbody>
            </table>
        </div>
        <div class="mt-2 text-xs text-gray-500 flex justify-between">
            <span id="docsCount">–í—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: 0</span>
            <span>–°–¢–†–û–ë.–ê—Ä—Å–µ–Ω–∞–ª v2.2 (Excel Support)</span>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê: –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç -->
<div id="newDocModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <span><i class="fa-solid fa-file-circle-plus mr-2"></i>–ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç</span>
            <button id="btnCloseModal" class="text-white hover:text-gray-300 text-xl">&times;</button>
        </div>
        <div class="modal-body">
            <form id="newDocForm" class="grid grid-cols-2 gap-4 text-sm">
                <div>
                    <label class="block text-gray-700 font-bold mb-1">–ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞</label>
                    <input type="text" id="newDocNumber" class="w-full border border-gray-300 p-2 rounded focus:border-blue-500 outline-none" placeholder="–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏" disabled>
                </div>
                <div>
                    <label class="block text-gray-700 font-bold mb-1">–î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏</label>
                    <input type="date" id="newDocDate" class="w-full border border-gray-300 p-2 rounded focus:border-blue-500 outline-none">
                </div>
                <div class="col-span-2">
                    <label class="block text-gray-700 font-bold mb-1">–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏</label>
                    <select id="newDocType" class="w-full border border-gray-300 p-2 rounded bg-white">
                        <option value="–ü–µ—Ä–≤–∏—á–Ω—ã–π –≤–≤–æ–¥">–ü–µ—Ä–≤–∏—á–Ω—ã–π –≤–≤–æ–¥ (–û—Ç –∑–∞–≤–æ–¥–∞)</option>
                        <option value="–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ">–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ (–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ)</option>
                        <option value="–ü—Ä–∏–µ–º">–ü—Ä–∏–µ–º (–ò–∑ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª–∫–∞)</option>
                        <option value="–û—Ç–ø—Ä–∞–≤–∫–∞">–û—Ç–ø—Ä–∞–≤–∫–∞ (–í –¥—Ä—É–≥–æ–π –ø–æ–ª–∫/–†–µ–º–æ–Ω—Ç)</option>
                        <option value="–°–ø–∏—Å–∞–Ω–∏–µ">–°–ø–∏—Å–∞–Ω–∏–µ (–†–∞—Å—Ö–æ–¥)</option>
                    </select>
                </div>
                <!-- –ò—Å—Ç–æ—á–Ω–∏–∫ (—Å–∫—Ä—ã—Ç –¥–ª—è –≤–≤–æ–¥–∞) -->
                <div id="sourceSelectContainer">
                    <label class="block text-gray-700 font-bold mb-1">–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å / –ò—Å—Ç–æ—á–Ω–∏–∫</label>
                    <select id="newDocSource" class="w-full border border-gray-300 p-2 rounded bg-white">
                        <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                    </select>
                </div>
                <!-- –ü–æ–ª—É—á–∞—Ç–µ–ª—å (—Å–∫—Ä—ã—Ç –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è) -->
                <div id="targetSelectContainer">
                    <label class="block text-gray-700 font-bold mb-1">–ü–æ–ª—É—á–∞—Ç–µ–ª—å / –û–±—ä–µ–∫—Ç</label>
                    <select id="newDocTarget" class="w-full border border-gray-300 p-2 rounded bg-white">
                        <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                    </select>
                </div>
                <div class="col-span-2 border-t pt-4 mt-2">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-bold text-gray-700 text-base">–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è</span>
                        <button type="button" id="btnAddRow" class="text-xs bg-green-100 text-green-700 border border-green-200 hover:bg-green-200 px-3 py-1 rounded font-bold transition">
                            <i class="fa-solid fa-plus mr-1"></i> –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É
                        </button>
                    </div>
                    <!-- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –ò–Ω–≤.–ù–æ–º–µ—Ä–∞ –∏ –¶–µ–Ω—ã (–û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ü–µ—Ä–≤–∏—á–Ω–æ–º –≤–≤–æ–¥–µ) -->
                    <div class="border border-gray-300 rounded h-48 overflow-auto bg-gray-50">
                        <table id="docItemsTable" class="w-full text-xs">
                            <thead class="bg-gray-200 sticky top-0">
                                <tr>
                                    <th class="p-2 w-1/3">–ò–∑–¥–µ–ª–∏–µ</th>
                                    <th class="p-2 w-1/5">‚Ññ / –ü–∞—Ä—Ç–∏—è</th>
                                    <th class="p-2 w-1/6 doc-accounting-col" style="display:none;">–ò–Ω–≤. ‚Ññ</th>
                                    <th class="p-2 w-1/6 doc-accounting-col" style="display:none;">–¶–µ–Ω–∞ (‚ÇΩ)</th>
                                    <th class="p-2 w-16 text-center">–ö–æ–ª-–≤–æ</th>
                                    <th class="p-2 w-10"></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button id="btnCancelModal" class="px-4 py-2 rounded border border-gray-300 hover:bg-gray-100 text-sm font-medium">–û—Ç–º–µ–Ω–∞</button>
            <button id="btnSaveDoc" class="px-4 py-2 rounded bg-blue-700 text-white hover:bg-blue-800 text-sm font-bold shadow flex items-center gap-2">
                <i class="fa-solid fa-check"></i> –ü—Ä–æ–≤–µ—Å—Ç–∏
            </button>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê: –û–±—ä–µ–∫—Ç -->
<div id="newObjectModal" class="modal">
    <div class="modal-content" style="width: 400px;">
        <div class="modal-header">
            <span><i class="fa-solid fa-sitemap mr-2"></i>–ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç / –°–∫–ª–∞–¥</span>
            <button onclick="document.getElementById('newObjectModal').style.display='none'" class="text-white hover:text-gray-300 text-xl">&times;</button>
        </div>
        <div class="modal-body">
            <div class="mb-4">
                <label class="block text-gray-700 font-bold mb-1 text-sm">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞</label>
                <input type="text" id="newObjName" class="w-full border border-gray-300 p-2 rounded outline-none" placeholder="–°–∫–ª–∞–¥ (–∞—Ä—Ç. –≤–æ–æ—Ä—É–∂–µ–Ω–∏–µ)">
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 font-bold mb-1 text-sm">–¢–∏–ø</label>
                <select id="newObjType" class="w-full border border-gray-300 p-2 rounded bg-white">
                    <option value="–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ">–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ (–ì—Ä—É–ø–ø–∞ / –ë–∞–∑–∞)</option>
                    <option value="–°–∫–ª–∞–¥">–°–∫–ª–∞–¥</option>
                    <option value="–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç">–í–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç</option>
                </select>
            </div>
            <!-- –ù–û–í–û–ï –ü–û–õ–ï: –ú–û–õ -->
            <div class="mb-4">
                <label class="block text-gray-700 font-bold mb-1 text-sm">–ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ-–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ (–ú–û–õ)</label>
                <input type="text" id="newObjMol" class="w-full border border-gray-300 p-2 rounded outline-none" placeholder="–ò–≤–∞–Ω–æ–≤ –ò. –ò.">
                <p class="text-xs text-gray-500 mt-1">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–∞–ø–∫–∞-–ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ.</p>
            </div>
            <button id="btnSaveObject" class="w-full bg-blue-700 text-white p-2 rounded font-bold hover:bg-blue-800">–°–æ–∑–¥–∞—Ç—å</button>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê: –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ -->
<div id="nomenclatureModal" class="modal">
    <div class="modal-content" style="width: 800px;">
        <div class="modal-header">
            <span><i class="fa-solid fa-list mr-2"></i>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã</span>
            <button onclick="document.getElementById('nomenclatureModal').style.display='none'" class="text-white hover:text-gray-300 text-xl">&times;</button>
        </div>
        <div class="modal-body grid grid-cols-3 gap-4 h-[500px]">
            <div class="col-span-1 border-r pr-4 bg-gray-50 p-2 rounded">
                <h4 class="font-bold text-gray-700 mb-3 border-b pb-1">–ù–æ–≤–æ–µ –∏–∑–¥–µ–ª–∏–µ</h4>
                <div class="mb-2">
                    <label class="text-xs font-bold text-gray-600">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="newNomName" class="w-full border p-1 rounded text-sm" placeholder="–ê–ö-74">
                </div>
                <div class="mb-2">
                    <label class="text-xs font-bold text-gray-600">–ò–Ω–¥–µ–∫—Å –ì–†–ê–£ / –ö–æ–¥</label>
                    <input type="text" id="newNomCode" class="w-full border p-1 rounded text-sm" placeholder="6–ü20">
                </div>
                <div class="mb-2">
                    <label class="text-xs font-bold text-gray-600">–°—á–µ—Ç —É—á–µ—Ç–∞</label>
                    <input type="text" id="newNomAccount" class="w-full border p-1 rounded text-sm" placeholder="101.38.1">
                </div>
                <!-- –ß–ï–ö–ë–û–ö–° –ù–û–ú–ï–†–ù–û–ì–û –£–ß–ï–¢–ê -->
                <div class="mb-4 flex items-center bg-white p-2 border rounded mt-4">
                    <input type="checkbox" id="newNomIsNumbered" class="mr-2 h-4 w-4" checked>
                    <label for="newNomIsNumbered" class="text-xs font-bold text-gray-700 cursor-pointer select-none">
                        –ù–æ–º–µ—Ä–Ω–æ–π —É—á–µ—Ç (–û–°)<br><span class="text-gray-400 font-normal">–°–Ω—è—Ç—å –≥–∞–ª–æ—á–∫—É –¥–ª—è –ø–∞—Ç—Ä–æ–Ω–æ–≤ –∏ –ú–ó</span>
                    </label>
                </div>
                <button id="btnSaveNom" class="w-full bg-green-600 text-white py-1 rounded text-sm font-bold hover:bg-green-700 mt-2">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
            <div class="col-span-2 overflow-auto">
                <table class="w-full text-sm">
                    <thead class="bg-gray-200 sticky top-0">
                        <tr>
                            <th class="p-2 text-left">–ò–Ω–¥–µ–∫—Å</th>
                            <th class="p-2 text-left">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                            <th class="p-2 text-left">–°—á–µ—Ç</th>
                        </tr>
                    </thead>
                    <tbody id="nomenclatureListBody"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê: –û—Å—Ç–∞—Ç–∫–∏ -->
<div id="balanceModal" class="modal">
    <div class="modal-content">
        <div class="modal-header bg-green-800">
            <span><i class="fa-solid fa-box-archive mr-2"></i><span id="balanceModalTitle">–û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ</span></span>
            <button onclick="document.getElementById('balanceModal').style.display='none'" class="text-white hover:text-gray-300 text-xl">&times;</button>
        </div>
        <div class="modal-body">
            <!-- –°—Ç—Ä–æ–∫–∞ —Å –æ–±—â–µ–π —Å—É–º–º–æ–π -->
            <div class="mb-3 text-right text-sm font-bold text-gray-700">
                –ò—Ç–æ–≥–æ —Å—É–º–º–∞ –ø–æ —Å–∫–ª–∞–¥—É: <span id="balanceTotalSum" class="text-green-700 text-lg">0.00 ‚ÇΩ</span>
            </div>
            <div class="border rounded overflow-auto h-[500px]">
                <table class="w-full text-sm">
                    <thead class="bg-gray-100 sticky top-0">
                        <tr>
                            <th class="p-2 text-left border-b">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                            <th class="p-2 text-left border-b">–°—á–µ—Ç</th>
                            <th class="p-2 text-left border-b">–°–µ—Ä–∏—è / –ü–∞—Ä—Ç–∏—è</th>
                            <th class="p-2 text-left border-b">–ò–Ω–≤. ‚Ññ</th>
                            <th class="p-2 text-right border-b">–¶–µ–Ω–∞</th>
                            <th class="p-2 text-center border-b">–ö–æ–ª-–≤–æ</th>
                            <th class="p-2 text-right border-b">–°—É–º–º–∞</th>
                        </tr>
                    </thead>
                    <tbody id="balanceTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê: –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
<div id="viewDocModal" class="modal">
    <div class="modal-content">
        <div class="modal-header bg-gray-800">
            <span><i class="fa-solid fa-file-lines mr-2"></i>–ù–∞–∫–ª–∞–¥–Ω–∞—è</span>
            <button onclick="document.getElementById('viewDocModal').style.display='none'" class="text-white hover:text-gray-300 text-xl">&times;</button>
        </div>
        <div class="modal-body">
            <div class="flex justify-between mb-4 border-b pb-2">
                <div>
                    <div class="text-xs text-gray-500">–ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞</div>
                    <div class="font-bold text-xl" id="viewDocNumber">---</div>
                </div>
                <div class="text-right">
                    <div class="text-xs text-gray-500">–î–∞—Ç–∞</div>
                    <div class="font-bold" id="viewDocDate">---</div>
                </div>
            </div>
            <div class="grid grid-cols-2 gap-4 mb-4 text-sm">
                <div><span class="text-gray-500">–¢–∏–ø:</span> <span id="viewDocType" class="font-bold"></span></div>
                <div></div>
                <div><span class="text-gray-500">–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å:</span> <span id="viewDocSource"></span></div>
                <div><span class="text-gray-500">–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</span> <span id="viewDocTarget"></span></div>
            </div>
            <h4 class="font-bold text-sm mb-2 mt-4 bg-gray-100 p-1">–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è</h4>
            <div class="border rounded overflow-auto h-64">
                <table class="w-full text-sm">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="p-2 text-left border-b">–ò–∑–¥–µ–ª–∏–µ</th>
                            <th class="p-2 text-left border-b">–°–µ—Ä–∏—è / –ü–∞—Ä—Ç–∏—è</th>
                            <th class="p-2 text-center border-b">–ö–æ–ª-–≤–æ</th>
                        </tr>
                    </thead>
                    <tbody id="viewDocItems"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê: –ò—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏—è (–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) -->
<div id="reportModal" class="modal">
    <div class="modal-content" style="height: 80vh; width: 800px;">
        <div class="modal-header bg-purple-700">
            <span><i class="fa-solid fa-clock-rotate-left mr-2"></i>–ò—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤–∞</span>
            <button class="modal-close-btn text-white hover:text-gray-300 text-xl" onclick="document.getElementById('reportModal').style.display='none'">&times;</button>
        </div>
        <div class="modal-body flex flex-col h-full">
            <div class="flex gap-2 mb-4 border-b pb-4">
                <input type="text" id="reportSearchInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: 12345) –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ..." class="flex-1 border p-2 rounded">
                <button id="btnReportSearch" class="bg-purple-600 text-white px-4 rounded hover:bg-purple-800">–ù–∞–π—Ç–∏</button>
            </div>
            <div id="reportSearchResults" class="mb-4 hidden">
                <h4 class="text-xs font-bold text-gray-500 uppercase mb-2">–ù–∞–π–¥–µ–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è:</h4>
                <div id="reportSearchList" class="flex flex-wrap gap-2"></div>
            </div>
            <div id="reportCurrentStatus" class="bg-gray-100 p-3 rounded mb-4 text-center font-bold text-gray-700 hidden"></div>
            <div class="flex-1 overflow-y-auto pr-2">
                <div id="reportTimeline" class="relative border-l-2 border-gray-300 ml-4 space-y-6">
                    <div class="text-gray-400 text-center mt-10">–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–¥–µ–ª–∏–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê: –õ–æ–≥–∏–Ω—ã –∏ –ø–∞—Ä–æ–ª–∏ -->
<div id="credentialsModal" class="modal" style="z-index: 2000;">
    <div class="modal-content" style="width: 450px;">
        <div class="modal-header bg-teal-700">
            <span><i class="fa-solid fa-key mr-2"></i>–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</span>
            <button onclick="closeModal('credentialsModal')" class="text-white hover:text-gray-300 text-xl">&times;</button>
        </div>
        <div class="modal-body text-center">
            <i class="fa-solid fa-circle-check text-4xl text-green-500 mb-3"></i>
            <h3 id="credModalTitle" class="text-lg font-bold text-gray-800 mb-2">–û–±—ä–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!</h3>
            <p class="text-sm text-gray-600 mb-4">–ü–µ—Ä–µ–¥–∞–π—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É –¥–ª—è –≤—Ö–æ–¥–∞.</p>
            <div class="bg-gray-100 p-4 rounded border border-gray-300 text-left relative">
                <div class="mb-2">
                    <span class="text-xs font-bold text-gray-500 uppercase">–õ–æ–≥–∏–Ω:</span>
                    <div id="credUsername" class="font-mono text-lg font-bold text-gray-800"></div>
                </div>
                <div>
                    <span class="text-xs font-bold text-gray-500 uppercase">–ü–∞—Ä–æ–ª—å:</span>
                    <div id="credPassword" class="font-mono text-lg font-bold text-blue-700"></div>
                </div>
            </div>
        </div>
        <div class="modal-footer justify-center">
            <button onclick="closeModal('credentialsModal')" class="bg-teal-700 text-white px-6 py-2 rounded font-bold hover:bg-teal-800">–ü–æ–Ω—è—Ç–Ω–æ, –∑–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
<div id="usersModal" class="modal">
    <div class="modal-content" style="width: 800px;">
        <div class="modal-header bg-teal-800">
            <span><i class="fa-solid fa-users-gear mr-2"></i>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
            <button onclick="closeModal('usersModal')" class="text-white hover:text-gray-300 text-xl">&times;</button>
        </div>
        <div class="modal-body">
            <div class="border rounded overflow-auto h-96">
                <table class="w-full text-sm">
                    <thead class="bg-gray-100 sticky top-0">
                        <tr>
                            <th class="p-2 text-left border-b w-12">ID</th>
                            <th class="p-2 text-left border-b">–õ–æ–≥–∏–Ω</th>
                            <th class="p-2 text-left border-b">–†–æ–ª—å</th>
                            <th class="p-2 text-left border-b">–ü—Ä–∏–≤—è–∑–∫–∞ –∫ –æ–±—ä–µ–∫—Ç—É</th>
                            <th class="p-2 text-center border-b w-24">–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- üî• –ú–û–î–ê–õ–ö–ê: –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ (–û–∂–∏–¥–∞–Ω–∏–µ) üî• -->
<div id="loadingOverlay" class="modal" style="z-index: 9999;">
    <div class="bg-white p-6 rounded-lg shadow-xl flex flex-col items-center">
        <i class="fa-solid fa-spinner fa-spin text-4xl text-green-600 mb-4"></i>
        <h3 class="text-lg font-bold text-gray-800" id="loadingText">–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</h3>
        <p class="text-sm text-gray-500 mt-2">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ. –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥.</p>
    </div>
</div>

<script src="js/arsenal.js"></script>
</body>
</html>